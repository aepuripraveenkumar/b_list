{% extends "base.html" %}


{% block title %}Entries published in {{ year|date:"Y" }}{% endblock %}

{% block extrahead %}
  <meta name="robots" content="noindex, follow">
{% endblock %}

{% block headlinks %}
  <link rel="up"
        href="{% url 'blog_entry_archive_index' %}"
        title="Latest entries"
        type="text/html">

{% with object_list|first as first %}
  {% with first.get_previous_by_pub_date as previous %}
    {% if previous %}
      {% with previous.pub_date as prev_date %}
  <link rel="prev"
        href="{% url 'blog_entry_archive_year' year=prev_date|date:"Y" %}"
        title="Entries published in {{ prev_date|date:"Y" }}"
        type="text/html">
      {% endwith %}
    {% endif %}
  {% endwith %}
{% endwith %}

{% with object_list|last as last %}
  {% with last.get_next_by_pub_date as next %}
    {% if next %}
      {% with next.pub_date as next_date %}
  <link rel="next"
        href="{% url 'blog_entry_archive_year' year=next_date|date:"Y" %}"
        title="Entries published in {{ next_date|date:"Y" }}"
        type="text/html">
      {% endwith %}
    {% endif %}
  {% endwith %}
{% endwith %}
{% endblock %}


{% block content %}

{% load typogrify_tags %}

<h1>Entries published in {{ year|date:"Y" }}</h1>
<p class="meta">{{ object_list.count }} entr{{ object_list.count|pluralize:"y,ies" }} published in this year. See also: <a href="{% url 'blog_entry_archive_index' %}">latest entries</a>.</p>

{% regroup object_list by pub_date|date:"F" as month_list %}

{% for month in month_list %}

<h2>{{ month.grouper }}</h2>

<ul>
  {% for entry in month.list %}
  <li><a href="{{ entry.get_absolute_url }}" rel="bookmark">{{ entry.title|typogrify }}</a></li>
  {% endfor %}
</ul>

{% endfor %}
{% endblock %}
